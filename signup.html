<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Self Training – Kayıt & Giriş (Basit Testli)</title>
  <style>
    body {font-family: Arial; background:#f3f6f9; margin:40px;}
    .card {background:#fff; padding:20px; border-radius:10px; max-width:420px; margin:auto; box-shadow:0 0 10px #ccc;}
    input, select {width:100%; padding:10px; margin:6px 0; border:1px solid #ccc; border-radius:6px;}
    .row{display:flex; gap:8px; flex-wrap:wrap}
    button {background:#1dbf73; color:#fff; border:none; padding:10px 14px; border-radius:6px; cursor:pointer;}
    .alt{background:#333}
    #msg{margin-top:6px}
  </style>
</head>
<body>
  <div class="card">
    <h2>Kayıt Ol / Giriş Yap</h2>
    <input id="name" placeholder="Ad Soyad">
    <input id="email" placeholder="E-posta">
    <input id="pw" type="password" placeholder="Şifre">
    <select id="bodyType">
      <option value="">Vücut Tipi</option>
      <option value="ecto">Ektomorf</option>
      <option value="meso">Mezomorf</option>
      <option value="endo">Endomorf</option>
    </select>
    <div class="row">
      <button id="btnSignup">Kayıt Ol</button>
      <button id="btnSignin" class="alt">Giriş Yap</button>
      <button id="btnTest">Buton Testi</button>
    </div>
    <p id="msg"></p>
    <p><a href="./index.html">Ana sayfa</a></p>
  </div>

  <script>
    // ---- TEST: JS dosyası çalışıyor mu? ----
    document.getElementById('btnTest').addEventListener('click', function(){
      alert('JS ÇALIŞIYOR ✅');
    });

    // ---- Mini Depo ----
    function LS(k,v){ if(v===undefined) return JSON.parse(localStorage.getItem(k)||'null'); localStorage.setItem(k,JSON.stringify(v)); }

    // ---- Tek akış: varsa giriş, yoksa kayıt ----
    function action(){
      const n = document.getElementById('name').value.trim();
      const e = document.getElementById('email').value.trim();
      const p = document.getElementById('pw').value.trim();
      const b = document.getElementById('bodyType').value;
      const msg = document.getElementById('msg');

      if(!n||!e||!p||!b){ msg.textContent='Lütfen tüm alanları doldurun.'; return; }

      const u = LS('user');
      if(u && u.e === e){
        msg.textContent = 'Giriş başarılı! Pano açılıyor…';
        setTimeout(()=>location.href='dashboard.html',500);
        return;
      }
      LS('user',{n,e,b});
      msg.textContent = 'Kayıt başarılı! Pano açılıyor…';
      setTimeout(()=>location.href='dashboard.html',700);
    }

    // Butonları bağla (inline onclick yerine güvenli yöntem)
    document.getElementById('btnSignup').addEventListener('click', action);
    document.getElementById('btnSignin').addEventListener('click', action);
  </script>
</body>
</html>
